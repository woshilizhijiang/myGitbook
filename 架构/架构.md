## 架构软脚虾

### 1.系统设计该如何准备

#### 1.知识储备

大型网站架构三板斧

- **高性能**架构设计：**读写分离、缓存、负载均衡、异步（进程间MQ，进程内线程池多线程）**
- **高可用**架构设计：CAP理论和BASE理论，通过**集群**来提升系统整体稳定性、超时和重试机制；应对**接口级**故障：降级、熔断、限流、排队
- **高扩展**架构设计：如何拆分系统。

#### 2.实践



#### 3.保持好奇心



#### 4.技术选型

实现同样的功能，技术方案选择多样性；缓存redis or memcached、网关Spring cloud gateway还是Netflix Zuul2。



### 2.IO多路复用

I/O多路复用（mutilplexing）本质：通过一种机制（**系统内核缓冲I/O数据**），让**单个进程可以监视多个文件描述符（多客户端请求做为多个fd）**，一旦某个描述符就绪（一般是读就绪或写就绪），能够通知程序进行相应的读写操作。

select、poll 和 epoll 都是 Linux API 提供的 IO 复用方式。

操作系统基本概念：

1. 用户空间/内核空间
2. 进程切换
3. 进程阻塞
4. 文件描述：
   文件描述符在形式上是一个非负整数。实际上，它是一个**索引值**，**指向内核为每一个进程所维护的该进程打开文件的记录表**。当程序打开一个现有文件或者创建一个新文件时，内核向进程返回一个文件描述符。在程序设计中，一些涉及底层的程序编写往往会围绕着文件描述符展开。但是文件描述符这一概念往往只适用于UNIX、Linux这样的操作系统。
5. 缓存I/O：
   缓存I/O又称为标准I/O，**大多数文件系统的默认I/O操作都是缓存I/O**。在Linux的缓存I/O机制中，**操作系统会将I/O的数据缓存在文件系统的页缓存中，即数据会先被拷贝到操作系统内核的缓冲区中**，然后才会从操作系统内核的缓冲区拷贝到应用程序的地址空间。

### 3.性能优化必知法则

**SQL优化， JVM、 DB， Tomcat参数调优 > 硬件性能优化（内存升级、 CPU核⼼数增加、机械硬盘—>固态硬盘等等） > 业务逻辑优化/缓存 > 读写分离、集群等 > 分库分表**







